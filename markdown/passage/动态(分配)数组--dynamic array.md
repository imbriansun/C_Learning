# 动态(分配)数组--dynamic array

原文地址

https://blog.csdn.net/zhanshen112/article/details/80758850

https://www.jianshu.com/p/55fe7e2d5703



#### 一、静态数组与动态数组的优缺点：

​	静态数组：

创建容易，引用简单，创建后无需释放

长度一定，灵活度不足

​	动态数组：

长度可据需求来，灵活度高

创建麻烦，需要在使用完后释放，否则可能内存泄漏



#### 二、动态数组的创建：

​	**在创建的时候从外层往里层，逐层创建；而释放的时候从里层往外层，逐层释放**

创建方式：

C99以前：仅支持使用类malloc函数进行创建

C99及以后：既可以使用类malloc函数进行创建，也可定义数组大小为变量，进行输入赋值



创建一个含有n个整数大小的一维数组：

```c
    /* C99及以后接受 */
    scanf("%d",&n);
    int a[n];

    /* malloc创建 */
    int* a;
    scanf("%d",&n);
    a=(int*)malloc(n*sizeof(int));
```



创建一个r行c列内含整数的二维数组：

```c
	/* mallloc法 */
	
	int r,c;
	scanf("%d %d",&r,&c);	// 输入行列

	int ** ptr;

	/* 申请二维数组空间 <由外至内> */

	ptr=(int**)malloc(r*sizeof(int*));	// ① 先创建行数个指针空间
	for(int i=0;i<r;i++){			// ② 再遍历“每一行” 对每一行来申请一个r个整数大小的空间赋给每一行的“行指针”
		ptr[i]=(int*)malloc(c*sizeof(int));
	}

```

​	**注意：创建二维动态数组malloc法应<u>由外到内</u>地创建**

​				申请第一维度行指针个数时，sizeof应为int*



```c
/* 仅C99及以后支持 */
	
	int r,c;
	scanf("%d %d",&r,&c);	// 输入行列

	int ptr[r][c];

```



#### 三、动态数组的内存释放

​	当使用完用类malloc函数申请的动态数组后，要及时释放所占内存，谨防造成内存泄露

```c
	/* 一维数组的内存释放 */

	free(ptr);		// free(一位数组名)
	
	/* 二维数组的内存释放 */
	
	for(int i=0;i<c;i++){
		free(ptr[i]);
	}
	
	free(ptr);

	
```

​	注意：**释放二维数组时应<u>由内及外</u>地释放**



​	同理申请三维数组等高维数组方法同上



#### 四、动态数组的存储期等